

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Module ngx_http_gzip_module</title><style type="text/css">body { font-family: Georgia, serif; } p { text-align: justify; } table.news p { margin-top: 0; } table.news td { vertical-align: baseline; } table.news .date { text-align: right; padding-right: 0.5em; white-space: nowrap; } table.donors td { vertical-align: baseline; } table.donors li { text-align: left; } div.directive { background: #EEEEEE; padding: 10pt 10pt 10pt 0; } div.directive td { vertical-align: baseline; } div.directive pre { padding: 0; margin: 0; } div.directive p { margin: 5pt 0 0 0; font-size: 80%; } div#banner { background: #EEEEEE; padding: 10pt 10pt 10pt 0; } a.notrans { color: gray; text-decoration:none; } span.initial { font-size: 200%; float: left; padding-right: 10pt;} li { text-align: justify; padding-top: 0.5em; } .compact li { padding-top: 0; } dt { padding-top: 0.5em; } .compact dt { padding-top: 0; } dd { text-align: justify; } td.list { background: #EEEEEE; } blockquote.note { text-align: justify; background: #EEEEEE; border: none; margin: 1em; padding: 0.5em; } blockquote.example { background: transparent; border: none; margin: 1em; padding: 0.5em; } blockquote.example pre { padding: 0; margin: 0; } sup { font-size: 50%; }</style><script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-27974099-2']);
        _gaq.push(['_setDomainName', 'nginx.org']);
        _gaq.push(['_trackPageview']);

        (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script></head><body><script>
with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0b00d9f315178018190921783e0677&asid=AQAAAABb0XdagItDXQAAAAD51shQtT0aMg==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
</script>
<table width="100%"><tr><td width="70%"><div id="banner"><center><table><tr><td align="center"><a href="http://nginx.com/support.html"><strong>nginx professional services</strong></a></td></tr><tr><td align="center"><i>Prioritize. Save time. Stay focused.</i></td></tr></table></center></div></td><td align="right"><a href="http://nginx.org"><img src="http://nginx.org/nginx.gif" alt="nginx" border="0"></a></td></tr><tr><td width="70%"><center><h3>Module ngx_http_gzip_module</h3></center></td><td rowspan="2" align="right" valign="top"><br>english<br><a href="../../../ru/docs/http/ngx_http_gzip_module.html">русский</a><br><br><a href="../../../cn/docs/http/ngx_http_gzip_module.html">简体中文</a><br><a class="notrans">עברית</a><br><a class="notrans">日本語</a><br><a class="notrans">türkçe</a><br><br><a href="../../../">news</a><br><a href="../../../en/">about</a><br><a href="../../../en/download.html">download</a><br><a href="../../../en/security_advisories.html">security advisories</a><br><a href="../../../en/docs/">documentation</a><br><a href="../../../en/pgp_keys.html">pgp keys</a><br><a href="../../../en/docs/faq.html">faq</a><br><a href="../../../en/links.html">links</a><br><a href="../../../en/books.html">books</a><br><a href="../../../en/support.html">support</a><br><a href="../../../en/donation.html">donation</a><br><br><a href="http://trac.nginx.org/nginx">trac</a><br><a href="http://wiki.nginx.org/">wiki</a><br><a href="http://twitter.com/nginxorg">twitter</a><br><a href="http://www.nginx.com/">nginx.com</a><br></td></tr><tr><td valign="top"><span><blockquote class="note">This translation may be out of date.
Check the <a href="../../../en/docs/http/ngx_http_gzip_module.html">English version</a>
for recent changes.</blockquote></span><table width="100%"><tr><td align="left"><a href="#example">Example Configuration</a><br><a href="#directives">Directives</a><br>     <a href="#gzip">gzip</a><br>     <a href="#gzip_buffers">gzip_buffers</a><br>     <a href="#gzip_comp_level">gzip_comp_level</a><br>     <a href="#gzip_disable">gzip_disable</a><br>     <a href="#gzip_min_length">gzip_min_length</a><br>     <a href="#gzip_http_version">gzip_http_version</a><br>     <a href="#gzip_proxied">gzip_proxied</a><br>     <a href="#gzip_types">gzip_types</a><br>     <a href="#gzip_vary">gzip_vary</a><br></td></tr></table>

<a name="summary"></a><p>
The <code>ngx_http_gzip_module</code> module is a filter
that compresses responses using the “gzip” method.
This often allows to reduce the size of transmitted data by half or even more.
</p>


<a name="example"></a><center><h4>Example Configuration</h4></center><p>
</p> <blockquote class="example"><pre>
gzip            on;
gzip_min_length 1000;
gzip_proxied    expired no-cache no-store private auth;
gzip_types      text/plain application/xml;
</pre></blockquote><p> 
</p><p>
The <code>$gzip_ratio</code> variable can be used to log the
achieved compression ratio.
</p>


<a name="directives"></a><center><h4>Directives</h4></center><a name="gzip"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip</strong> <code>on</code> | <code>off</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip off;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code>, <code>if in location</code><br>
                </td>
                </tr>
            </table></div><p>
Enables or disables gzipping of responses.
</p><a name="gzip_buffers"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_buffers</strong> <code><i>number</i></code> <code><i>size</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_buffers 32 4k|16 8k;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets the <code><i>number</i></code> and <code><i>size</i></code> of buffers
used to compress a response.
By default, the buffer size is equal to one memory page.
This is either 4K or 8K, depending on a platform.
</p> <blockquote class="note">
Until version 0.7.28, four 4K or 8K buffers were used by default.
</blockquote><p> 
</p><a name="gzip_comp_level"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_comp_level</strong> <code><i>level</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_comp_level 1;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets a gzip compression <code><i>level</i></code> of a response.
Acceptable values are in the 1..9 range.
</p><a name="gzip_disable"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_disable</strong> <code><i>regex</i></code> ...;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            
            —
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table><p>This directive appeared in version 0.6.23.

            </p></div><p>
Disables gzipping of responses for requests with
“User-Agent” header fields matching
any of the specified regular expressions.
</p><p>
The special mask “<code>msie6</code>” (0.7.12) corresponds to
the regular expression “<code>MSIE [4-6]\.</code>” but works faster.
Starting from version 0.8.11, “<code>MSIE 6.0; ... SV1</code>”
is excluded from this mask.
</p><a name="gzip_min_length"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_min_length</strong> <code><i>length</i></code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_min_length 20;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets the minimum length of a response that will be gzipped.
The length is determined only from the “Content-Length”
response header field.
</p><a name="gzip_http_version"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_http_version</strong> <code>1.0</code> | <code>1.1</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_http_version 1.1;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Sets the minimum HTTP version of a request required to compress a response.
</p><a name="gzip_proxied"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_proxied</strong> 
    <code>off</code> |
    <code>expired</code> |
    <code>no-cache</code> |
    <code>no-store</code> |
    <code>private</code> |
    <code>no_last_modified</code> |
    <code>no_etag</code> |
    <code>auth</code> |
    <code>any</code>
    ...;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_proxied off;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Enables or disables gzipping of responses for proxied
requests depending on the request and response.
The fact that the response is proxied is determined based on
the presence of the “Via” request header field.
A directive accepts multiple parameters:
</p> <dl class="compact">

<dt><code>off</code></dt>
<dd>
disables compression for all proxied requests,
ignoring other parameters;
</dd>

<dt><code>expired</code></dt>
<dd>
enables compression if a response header includes the field
“Expires” with a value that disables caching;
</dd>

<dt><code>no-cache</code></dt>
<dd>
enables compression if a response header includes the field
“Cache-Control” with the parameter “<code>no-cache</code>”;
</dd>

<dt><code>no-store</code></dt>
<dd>
enables compression if a response header includes the field
“Cache-Control” with the parameter
“<code>no-store</code>”;
</dd>

<dt><code>private</code></dt>
<dd>
enables compression if a response header includes the field
“Cache-Control” with the parameter “<code>private</code>”;
</dd>

<dt><code>no_last_modified</code></dt>
<dd>
enables compression if a response header does not include the field
“Last-Modified”;
</dd>

<dt><code>no_etag</code></dt>
<dd>
enables compression if a response header does not include the field
“ETag”;
</dd>

<dt><code>auth</code></dt>
<dd>
enables compression if a request header includes the field
“Authorization”;
</dd>

<dt><code>any</code></dt>
<dd>
enables compression for all proxied requests.
</dd>

</dl><p> 
</p><a name="gzip_types"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_types</strong> <code><i>mime-type</i></code> ...;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_types text/html;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Enables gzipping of responses for the specified MIME types in addition
to “<code>text/html</code>”.
The special value “<code>*</code>” matches any MIME type (0.8.29).
Responses with the type “<code>text/html</code>” are always compressed.
</p><a name="gzip_vary"></a><div class="directive"><table cellspacing="0">
                <tr>
                <td>
            syntax:
                </td>
                <td>
            <code><strong>gzip_vary</strong> <code>on</code> | <code>off</code>;</code><br>
                </td>
                </tr>
            
                <tr>
                <td>
            default:
                </td>
                <td>
            <pre>gzip_vary off;</pre>
                </td>
                </tr>
            
                <tr>
                <td>
            context:
                </td>
                <td>
            <code>http</code>, <code>server</code>, <code>location</code><br>
                </td>
                </tr>
            </table></div><p>
Enables or disables emitting the “Vary: Accept-Encoding”
response header field if the directives
<a href="#gzip">gzip</a> or
<a href="ngx_http_gzip_static_module.html#gzip_static">gzip_static</a>
are active.
</p>

</td></tr></table></body></html>
